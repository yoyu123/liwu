<!DOCTYPE html>
<html data-use-rem="750">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>冬天暖心礼物</title>
    <link rel="stylesheet" href="./css/main.css">   
</head>
<body>
<script>
	!function(win){var doc=win.document,html=doc.documentElement,option=html.getAttribute("data-use-rem");if(null!==option){var baseWidth="NaN"==parseInt(option).toString()?750:parseInt(option),grids=baseWidth/100,clientWidth=html.clientWidth||320;html.style.fontSize=clientWidth/grids+"px";var testDom=document.createElement("div"),testDomWidth=0,adjustRatio=0;testDom.style.cssText="height:0;width:1rem;",doc.body.appendChild(testDom);var calcTestDom=function(){if(testDomWidth=testDom.offsetWidth,testDomWidth!==Math.round(clientWidth/grids)){adjustRatio=clientWidth/grids/testDomWidth;var reCalcRem=clientWidth*adjustRatio/grids;html.style.fontSize=reCalcRem+"px"}else doc.body.removeChild(testDom)};setTimeout(calcTestDom,20);var reCalc=function(){var newCW=html.clientWidth;newCW!==clientWidth&&(clientWidth=newCW,html.style.fontSize=newCW*(adjustRatio?adjustRatio:1)/grids+"px")};if(reCalc(),doc.addEventListener){var resizeEvt="orientationchange"in win?"orientationchange":"resize";win.addEventListener(resizeEvt,reCalc,!1),doc.addEventListener("DOMContentLoaded",reCalc,!1)}}}(window);
</script>
<div class="container">
	<div class="act-mod">
		<img src="./img/bg_01.jpg" />
	</div>
	<div class="act-mod">
		<img src="./img/bg_02.jpg" />
		<div class="block save-bell">
			<p>仅需19元，即得一个气球可兑换礼物，再送一张鹅漫U品包邮券！因新疆物流暂停，礼物无法发货，故不支持该地区用户参与。</p>
			<div class="gift">
				<div class="thumb">
					<img src="./img/g.png">
				</div>
			</div>
			<div class="btn-group">
				<a href="javascript:void(0)" class="btn-normal">立即抢购</a>
			</div>
		</div>
	</div>
	<div class="act-mod">
		<img src="./img/bg_03.jpg" />
		<div class="block exchange">
			<div class="top">
				<p class="tip">一个气球换一次，每人最多参与3次，礼物最低20元，最高739元。</p>
				<a href="#" class="btn-rules">活动规则</a>
			</div>
			<div class="winner">
				<ul>
					<li><p>100****164抽到魔鬼猫无线蓝牙耳机</p></li>
					<li><p>927****38抽到不二圣诞兔毛绒玩偶</p></li>
					<li><p>334****474抽到怪奇鹅冬日线装笔记本</p></li>
					<li><p>519****52抽到歪瓜出品套套湿巾</p></li>
					<li><p>793****38抽到HELLO KITTY生日优卡杯</p></li>
					<li><p>259****871抽到歪瓜吸猫便利贴</p></li>
					<li><p>157****474抽到HELLO KITTY生日优卡杯</p></li>
					<li><p>867****25抽到不二圣诞兔毛绒玩偶</p></li>
					<li><p>415****563抽到怪奇鹅冬日线装笔记本</p></li>
					<li><p>615****75抽到魔鬼猫无线蓝牙耳机</p></li>
				</ul>
			</div>
			<div class="anm"></div>
			<div class="lottery">
				<div class="prize" index="1"><strong class="hide">秋山优花里手办</strong></div>
				<div class="prize" index="2"><strong class="hide">QQfamily多福旅行箱</strong></div>
				<div class="prize" index="3"><strong class="hide">魔鬼猫蓝牙耳机</strong></div>
				<div class="prize" index="4"><strong class="hide">正义联盟充电宝套装</strong></div>
				<div class="prize" index="10"><strong class="hide">正义联盟口罩</strong></div>
				<div class="lotteryBtn"><strong class="hide">开始兑换</strong><p>当前有<span class="lottChance">&nbsp;&nbsp;&nbsp;</span>个幸运气球</p></div>
				<div class="prize" index="5"><strong class="hide">全职高手笔记本</strong></div>
				<div class="prize" index="9"><strong class="hide">怪企鹅毛绒眼罩</strong></div>
				<div class="prize" index="8"><strong class="hide">正义联盟随手杯</strong></div>
				<div class="prize" index="7"><strong class="hide">正义联盟指环支架</strong></div>
				<div class="prize" index="6"><strong class="hide">钢铁侠无线鼠标</strong></div>
			</div>
		</div>
	</div>
	<div class="act-mod">
		<img src="./img/bg_04.jpg" />
		<div class="block my-gifts">
			<p>点击下方图片，前往下单，只需支付2毛钱即可送货上门。</p>
			<dl>
				<dd>
					<img src="./img/cover.png">
				</dd>
				<dd>
					<img src="./img/cover.png">
				</dd>
				<dd>
					<img src="./img/cover.png">
				</dd>

			</dl>
		</div>
	</div>
</div>

<div class="footer-nav">
	<a href="#">商城首页</a>
	<a href="#">我的优惠券</a>
	<a href="#">我的订单</a>
</div>


<script type="text/javascript" src="./js/zepto.min.js"></script>
<script type="text/javascript" src="./js/animate.js"></script>
<script type="text/javascript">
var tigerGame = {
	params:null,
	init:function(){
		tigerGame.params ={
			num:{
				circle:2,//抽奖圈数
				lap:10,
				prize:2//抽中奖品
			},
			step:{
				total:0,
				fast:0,
				slow:10
			},
			speed:{
				fast:100,
				slow:200  
			},
			index:1
		}
	},
	monitor:function(){
		$(".lotteryBtn").bind("click",tigerGame.startAction);
	},
	getPrize:function(){
		prize = Math.floor(Math.random()*9 +1);
	},
	startAction:function(){
		tigerGame.init();
		$(".lotteryBtn").unbind("click");
		tigerGame.params.step.total = tigerGame.params.num.circle * tigerGame.params.num.lap + tigerGame.params.num.prize;
		tigerGame.goAction();
	},
	goAction:function(){
		if(tigerGame.params.step.total<=0){
			tigerGame.overAction();
			return false;  
		}
		$(".prize").removeClass("active");
		$(".prize").each(function(){
			if($(this).attr("index")==tigerGame.params.index){
				$(this).addClass("active");
			} 
		});
		if(tigerGame.params.step.total > tigerGame.params.step.slow){
			setTimeout(tigerGame.goAction,tigerGame.params.speed.fast);
		} else {
			setTimeout(tigerGame.goAction,tigerGame.params.speed.slow);
			tigerGame.params.speed.slow+=80;
		}
		tigerGame.params.step.total--;
		tigerGame.params.index++; 
		if(tigerGame.params.index==11){
			tigerGame.params.index = 1;
		}
	},
	overAction:function(){
		$(".lotteryBtn").bind("click",tigerGame.startAction);
		tigerGame.init();
	}
};
</script>
<script>
(function(){
	function msgmove(){ 
		var height = $(".winner ul li").first().height();
		$(".winner ul li").first().animate({"opacity":0,"height":0},500,function(){
			$(".winner ul li").last().after($(".winner ul li").first());
		});
		$(".winner ul li").last().animate({"height":height,"opacity":1},0);

		setTimeout(function(){
			msgmove();
		},3000);
	}
	msgmove();

	$(".lotteryBtn").bind("click",tigerGame.startAction);

	$(".btn-record").click(function(){
		$(".mod-dialog-pop-exchange").removeClass("hide").addClass("show");
	});

	$(".btn-rules").click(function(){
		$(".mod-dialog-pop-rules").removeClass("hide").addClass("show");
	});

	$(".close").click(function(){
		$(this).parents(".mod-game-dialog").removeClass("show").addClass("hide");
	});
})();
</script>

</body>
</html>